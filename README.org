#+TITLE: Flake configuration
#+AUTHOR: Tulkdan
#+EMAIL: pedro8correa@gmail.com

#+begin_src nix :tangle flake.nix :noweb yes
  {
    <<description>>

    inputs = {
      <<inputs>>
    };

    outputs = {self, nixpkgs}: let
      system = "x86_64-linux";
      hostname = "nixos";
      pkgs = import nixpkgs {inherit system;};
    in {
      <<outputs>>
    };
  }
#+end_src

** Description
#+NAME: description
#+begin_src nix
  description = "Tulk'dan's system config";
#+end_src

** Inputs
:PROPERTIES:
:header-args: :noweb-ref inputs
:END:

*** Nixpkgs

#+begin_src nix
  nixpkgs.url = "github:nixos/nixpkgs/nixos-unstable";
#+end_src

** Outputs
:PROPERTIES:
:header-args: :noweb-ref outputs
:END:

*** NixOS System
#+begin_src nix
  nixosConfigurations.${hostname} = nixpkgs.lib.nixosSystem {
    inherit system;

    modules = [ ./system/configuration.nix ];
  };
#+end_src

